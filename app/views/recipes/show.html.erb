<div class="title">
  <h2>レシピ詳細</h2>
</div>

<div class="recipe">
  
  <!--投稿ユーザー名-->
  <p><%= @recipe.user.name %></p>

  <!--料理名-->
  <p><strong><%= @recipe.cooking_name %></strong>0</p>

  <!--イメージ画像-->
  <p><%= attachment_image_tag @recipe, :recipe_image %></p>

  <p><%= @recipe.recipe_content %></p>

  <!--いいねボタン-->
  <% if @recipe.favorited_by?(current_user) %>
    <p>
      <%= link_to recipe_favorites_path(@recipe), method: :delete do %>
        ♥<%= @recipe.favorites.count %> いいね
      <% end %>
    </p>
  <% else %>
    <p>
      <%= link_to recipe_favorites_path(@recipe), method: :post do %>
        ♡<%= @recipe.favorites.count %> いいね
      <% end %>
    </p>
  <% end %>

</div>

<!--コメント投稿機能-->
<div class="new-comment">
  <%= form_with model:[@recipe, @recipe_comment], local: true do |f| %>
    <%= f.text_area :comment_content, rows:'3', placeholder: "コメント欄" %>
    <%= f.submit "コメントする" %>
  <% end %>
</div>


<div class="comments">
  <!--コメント数-->
  <p>コメント件数：<%= @recipe.recipe_comments.count %></p>

  <!--コメント一覧-->
  <% @recipe.recipe_comments.each do |recipe_comment| %>
    <p><%= attachment_image_tag @user, :profile_image %></p>
    <%= recipe_comment.user.name %>
    <%= recipe_comment.created_at.strftime('%Y/%m/%d') %>
    <%= recipe_comment.comment_content %>
  <% end %>
</div>
